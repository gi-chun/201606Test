/**
 * SAP 싱크 맞추기용 21로 송달 변경. (로그인 처리하여 전입대기 상태 22인 경우 변경 함) 
 */

var alopexreadyRun = true;
if(alopexreadyRun){
	document.addEventListener('alopexready', init);
	alopexreadyRun = false;
}

nowPGCode = 'MMNST0M0';
var cb = '';
var pnLog = "";

var k = 0;

//var acc = [{'pn':'01027218776','bp':'15120329','ca':'16234914'}];

var acc = [
{'pn':'01047441887','bp':'18727245','ca':'18917052'},
{'pn':'01068210070','bp':'15552935','ca':'16667657'},
{'pn':'01089830350','bp':'18718730','ca':'18913743'},
{'pn':'01072135599','bp':'15944100','ca':'16669859'},
{'pn':'01089457728','bp':'15029648','ca':'16229019'},
{'pn':'01047212684','bp':'19032532','ca':'19164870'},
{'pn':'01072000165','bp':'16530794','ca':'17145896'},
{'pn':'01039811025','bp':'15805940','ca':'15335303'},
{'pn':'01082740168','bp':'15227489','ca':'16310406'},
{'pn':'01097239737','bp':'14923483','ca':'15856998'},
{'pn':'01089780463','bp':'18718730','ca':'18913743'},
{'pn':'01021230149','bp':'18464325','ca':'18719026'},
{'pn':'01053593108','bp':'14714039','ca':'15631231'},
{'pn':'01085204141','bp':'18538375','ca':'18759626'},
{'pn':'01050251887','bp':'18727245','ca':'18917052'},
{'pn':'01052137686','bp':'15973541','ca':'16695948'},
{'pn':'01076551298','bp':'17666998','ca':'18054857'},
{'pn':'01072135542','bp':'15944100','ca':'16669859'},
{'pn':'01092509591','bp':'14723976','ca':'15642057'},
{'pn':'01028140435','bp':'19409942','ca':'19505747'},
{'pn':'01020283131','bp':'15552935','ca':'16667657'},
{'pn':'01050008675','bp':'15292681','ca':'16260307'},
{'pn':'01084431131','bp':'16945143','ca':'18073706'},
{'pn':'01049332691','bp':'14892449','ca':'16191191'},
{'pn':'01047605040','bp':'19032532','ca':'19164870'},
{'pn':'01054529580','bp':'19500528','ca':'19607789'},
{'pn':'01027457001','bp':'15029648','ca':'16229019'},
{'pn':'01099084883','bp':'15478884','ca':'16325570'},
{'pn':'01028028016','bp':'14713691','ca':'15630868'},
{'pn':'01088896573','bp':'19524148','ca':'19614381'},
{'pn':'01088657496','bp':'15101232','ca':'16181668'},
{'pn':'01096405689','bp':'18953420','ca':'19096882'},

];


//var accRT = [8002];
var accRT = [acc.length];

function init(){
	runPGM(acc[k]);
	k = k+1;
}

function runPGM(um){
	var paramSS = { 'list' : 	[{'bpCaReqList' : [] }]	};
	
	paramSS.list[0].bpCaReqList[0] = {
			'bp' : um.bp,
			'ca' : um.ca,
			'phoneNum' : um.pn,
			'statusGp' : '21',
			'gubun' : '50'
	};
	
	httpSend("putAccInfo", paramSS, function(cb){
		console.log(cb);
		console.log('update ok');
		accRT[k-1] = {'pn':um.pn,'result':'true','resultMSG':cb.list.bpCaList[0].retMsg,'resultPhone':paramSS.list[0].bpCaReqList[0].phoneNum,'resultCA':paramSS.list[0].bpCaReqList[0].ca,'resultBP':paramSS.list[0].bpCaReqList[0].bp};
		runMainGo();
	}, function(errorCode, errorMessage){
		accRT[k-1] = {'pn':um.pn,'result':'false'};
		runMainGo();
		console.log('update error');
	});
	
}


function runMainGo(){ // 결과

	if(k < acc.length){
		console.log('#####################################################################################################['+k+']############# next ['+acc[k].pn+']');
		runPGM(acc[k]);
		k = k+1;
		
	}else{
		console.log('######################################################################################### end complate ################################################################');
		var ctn1 = 0;
		var ctn2 = 0;
		for(var ss = 0;ss<accRT.length;ss++){
			if(accRT[ss].result == 'false'){
				ctn2 = ctn2 + 1;
			}else{
				ctn1 = ctn1 + 1;
			}
		}
		alert('종료\n\n############\n총건수['+accRT.length+']\n\n###########\n성공['+ctn1+']\n\n###########\n실패['+ctn2+']');
	}
}

function testCheck(){
	for(var i=0;i<accRT.length;i++){
		if(accRT[i].resultMSG.indexOf('013') > 0){
			
		}else{
			console.log(i+':'+accRT[i].pn+':'+accRT[i].resultBP+':'+accRT[i].resultCA+':'+accRT[i].resultMSG);
		}
	}
}

//function a(){
//	var rts = ['15529753','15709295','15773437','15746829','15914424','16242262','16069027','17630621','18654980','18823417','18876794','18954075','19003416','19100403','19152793','15471532','15532747','15471683','15568517','15427723','17562752','18649539','15489498','15483586','15499311','15649524','15535029','16861087','15699071','15709918','15975100','15771529','15726970','16027603','15829156','15757612','15820707','15704144','15873639','15875889','18715382','15774182','18860022','15888801','15867981','15981836','15981984','15837599','16094600','16031186','16011649','16156682','16034042','16234663','16218344','16033917','16034939','16430432','16131444','16090511','16101675','18480844','16181987','16120764','16188660','15290794','16478909','17331184','15317530','15476614','15298013','15801970','15842243','16442597','16590737','16424557','15244381','16476889','16416320','16558625','16298320','18233222','16417437','15352937','15334221','15341856','15262086','16425732','16367788','16525923','15292588','16580099','15382888','16573995','16517777','15250060','15304729','15294568','15380990','16506325','16587419','18729429','15414188','15471284','15536150','15548757','15348689','15583254','16658323','16757503','16781379','16851177','16861560','16885554','16886620','16934229','16963158','17363697','17072539','17097483','17092507','17123206','17129192','17132826','17141018','17209828','17284004','17311523','17331230','17353696','17375942','17390940','17390319','17419398','17439619','17448689','17449022','17451092','17448306','17463453','17469434','17483059','17503149','17490001','17510792','17542708','17552191','17567741','17574680','18258241','17613004','17638264','17629742','17651221','17706239','17719073','17711623','17783835','17795666','17792329','17793122','17844610','17867925','18194954','19057855','17951710','17987664','17997911','18000376','18021535','18023425','18069595','18081379','18083820','18101476','18113820','18111456','18132835','18142791','18161708','18173494','18199654','18198510','18217488','18225153','18233987','18248173','18266893','18274349','18296240','18336384','18359788','18365722','18373277','18421878','18423241','18421409','18440831','18442249','18496633','18497585','18513394','18524323','18545569','18570551','18582037','18592653','18587989','18595520','18602945','18621830','18666983','18660726','18656762','18679109','18673371','18685551','18684754','18691200','18709490','18708366','18727875','18739721','18758744','18763768','18770144','18779479','18784833','18783786','18803290','18815023','18854410','18859402','18865222','18895169','18886718','18886043','18898359','18906496','18911933','18914166','18926136','18933506','18946317','18945651','18958077','18953939','18968205','18974865','18972588','19014079','19020431','18992041','19013388','18981319','18988593','19005708','19024898','19035586','19053270','19057622','19080941','19091342','19093252','19112953','19108330','19111111','19148744','19169111','19171445','15435826','15321753','15406259','15897063','15645580','15448538','15654385','15506713','15573869','15767673','15749655','15825574','15760013','15805802','15870369','15997914','16229508','16083220','16061685','16462947','16170242','16418397','15254690','16540477','16385267','16319342','15305048','16445374','16582535','15322736','15338965','15376132','15433362','16523759','15470519','18939682','16878499','16907442','16957241','17095260','17130395','17193781','17202625','17276682','17389789','17408315','17531548','17600682','17736306','17790210','17779849','17777494','17791841','18000378','18124779','18159591','18205873','18206773','18303482','18310060','18336845','18389694','18404583','18404622','18421127','18462949','18513728','18542253','18654132','18634302','18645941','18649941','18669545','18664569','18667362','18723714','18718979','18733169','18740620','18834572','18823864','18835788','18846484','18900675','18906148','18935761','18942455','18946306','19001775','19038275','19028422','19048856','19076803','19080781','19091102','19113081','19128089','19137813','19156822','19171084','15363331','15514723','15777409','15547445','15842288','15633537','15620723','15543688','15751270','15711181','15698609','15701375','15792698','15538701','15897534','17244948','15769585','15776313','15922995','15886779','17958727','18278218','15986466','15879854','15840245','15949042','15901301','15939822','15982258','15959186','15992243','16031596','16053868','15994354','16145501','16115090','16280809','16265083','16025191','16594465','16249427','16487815','16574831','15261654','16365359','16575835','15390247','16512580','15401184','15416447','15540357','15552127','16684566','16694652','16744925','16741250','16776808','16799157','16852127','16857878','16864229','16875231','16938141','16938143','17082048','17139851','17159719','17172881','17229629','17241121','17261249','17437179','17461376','18781818','17500339','17509817','17695147','17693621','17691170','17684210','17682611','17734105','17775723','17845488','17881574','17949728','18001938','18009013','18072812','18110080','18128760','18141661','18140907','18208849','18221434','18222948','18286548','18314310','18316243','18322292','18382310','18400886','18421857','18463367','18533750','18572892','18572032','18595878','18592721','18599859','18629317','18641732','18647026','18666214','18721791','18724230','18744301','18744303','18762651','18769484','18840650','18860665','18876205','18920130','18969202','18965805','18992233','19021122','19036184','19041851','19051574','19075252','19081808','19095045','19099296','19144968','19131054','19154893','19163694','19151820','19153824','19169113','15751588','15628921','15510181','15780291','15596249','15776247','16229767','16174422','16204903','16042004','16136144','16243993','16398181','19011255','16437781','16402174','16345995','15268245','16419667','16391858','17526719','15368643','15475354','16629688','16797522','16958309','17032171','17150583','19093665','17384839','17792643','17937280','17949380','18101993','18134637','18138397','18149748','18232056','18274392','18291047','18303577','18426750','18454399','18517170','18576198','18569919','18605163','18740394','18798194','18830809','18870601','18884919','18937570','18955571','18992875','19034670','19096885','19104360','19166845','19167774','15645861','15750916','15904564','15944294','16491374','16484479','15442198','17459983','17573000','18982580','17878342','18899198','15693950','16064133','16070490','15993063','16077416','16028842','15349848','16444201','16369461','16386856','16949537','17424054','17561360','17997762','19011093','15794146','15826772','16056151','16060938','16253309','15736375','16540554','18933337','15419826','16680493','16777618','17084520','17586250','17688012','17833621','18384044','18438888','18726654','15674403','16015029','16204389','16368141','15253403','16491525','16522381','17031674','17177723','18168355','18305266','15529948','16276840','16745159','16226739','15709008','15710635','15663838','15822227','16148910','16152663','16339553','16981776','15682524','16610659','19135963','16586068','16480405','17420689','17529114','16150716','17562983','17945693','18424539','18976145','16594030','15691140','18653590','15542557','15775942','15784195','15953748','15782446','17826135','18967155','15669658','16030947','16159745','16279204','15495749','16526553','16962435','15621301','15648997','16396934','19017897','15944811','18483596','18603107','16862008','15959692','16224376','15262802','18426189','18279222','18015119','16814673','17880268','17025975'];
//	var cts = ['19100403','15773437','18823417','18876794','15746829','15529753','18954075','16242262','17630621','15914424','19003416','15875889','18654980','15414188','19148744','15548757','15427723','15837599','19020431','18684754','16027603','16120764','16031186','18423241','17419398','15250060','18296240','17439619','17353696','16090511','18981319','18860022','18161708','18274349','18656762','15873639','19053270','18758744','15771529','17311523','16417437','16156682','18946317','18101476','15499311','15334221','15704144','15774182','16442597','18972588','15709295','18233987','15568517','18545569','18958077','18194954','17795666','15757612','17390319','16658323','18083820','17987664','16590737','15317530','18595520','17510792','18198510','18649539','18621830','17867925','18779479','18225153','18000376','18803290','19005708','17542708','17092507','16757503','16425732','18968205','16430432','19108330','17132826','18911933','19093252','15483586','17951710','16851177','19013388','18365722','18570551','18992041','18666983','18233222','18023425','18081379','18497585','16934229','18524323','17711623','18886718','16298320','15294568','15290794','18442249','15382888','17331230','15292588','18715382','18727875','15888801','18582037','17503149','18421409','15583254','15476614','16476889','18945651','18914166','15489498','15471683','15535029','17706239','18111456','18926136','18770144','17141018','15820707','15709918','17719073','18248173','16033917','17490001','18258241','15726970','16131444','17375942','17638264','17483059','15262086','17451092','17331184','17463453','17448306','15298013','17448689','18784833','15304729','19057855','16234663','18199654','16424557','17284004','18933506','18587989','15829156','19112953','16886620','17129192','18854410','17072539','17562752','19111111','18974865','17844610','18988593','19024898','18513394','16525923','18132835','17449022','16478909','15341856','19091342','16367788','18691200','18886043','19014079','15649524','17097483','17651221','18859402','18709490','16861560','18708366','18660726','18679109','17552191','17390940','15975100','15244381','15867981','18898359','17123206','18373277','18217488','19057622','18440831','16558625','17783835','17792329','16587419','18069595','17793122','15471532','16580099','18673371','18480844','16506325','19171445','16034939','18865222','16034042','19080941','16094600','17469434','18113820','15380990','17567741','16963158','18815023','18906496','18783786','16011649','18142791','19035586','16861087','18336384','17363697','18602945','16517777','18021535','17997911','17209828','17613004','18421878','18592653','18173494','16181987','15471284','17629742','15352937','18266893','17574680','18739721','16573995','18310060','19171084','18946306','18654132','15870369','18389694','17790210','18723714','17408315','15897063','18846484','15376132','18421127','18359788','17130395','19156822','17791841','15825574','18542253','19113081','16170242','15406259','15654385','15805802','16083220','15645580','16418397','18667362','19091102','15997914','17777494','16878499','17600682','15470519','18462949','15448538','18303482','15338965','18336845','17193781','16445374','18900675','16957241','18634302','15305048','15573869','18733169','16462947','18740620','18649941','16582535','16416320','18906148','19028422','17736306','16907442','15767673','15435826','17779849','18939682','15321753','19128089','16523759','18669545','18000378','19038275','17531548','18834572','19076803','15254690','18645941','18205873','18513728','16319342','15760013','18159591','15442198','16385267','18935761','19080781','16061685','17202625','18124779','18942455','18718979','19137813','18835788','18206773','18664569','18404622','18823864','17095260','19001775','18382310','15698609','18128760','15777409','17461376','16249427','16365359','15751270','17241121','18965805','15992243','15840245','18140907','17172881','19036184','17845488','18001938','16852127','18400886','18629317','18840650','18314310','19099296','18141661','16875231','17949728','16744925','19021122','15552127','18595878','15939822','17881574','18992233','16512580','15401184','18599859','19131054','15540357','15949042','15879854','17159719','15514723','18316243','19166845','18762651','18463367','15959186','17684210','16025191','17082048','19169111','15769585','19163694','15792698','15416447','18533750','18572892','16799157','18072812','16594465','15261654','18322292','17500339','18969202','16053868','15543688','15994354','19041851','17682611','16776808','17244948','18592721','18110080','18724230','18666214','15711181','16031596','18781818','15886779','18920130','15701375','17775723','17695147','16280809','17139851','18721791','16938143','16487815','18647026','18221434','15982258','18769484','16741250','15633537','18572032','18860665','15922995','16574831','18744301','15547445','18744303','17389789','16145501','16864229','15776313','18222948','15986466','18421857','16115090','15532747','17691170','19081808','19095045','19153824','18009013','18729429','16857878','16938141','15433362','15842288','19144968','18876205','15538701','17734105','16694652','15620723','19051574','17150583','15780291','16204903','15268245','19104360','16243993','18870601','18605163','15751588','19093665','16437781','15776247','15510181','16042004','19167774','16345995','16218344','16797522','18101993','17937280','16174422','17693621','15628921','18517170','18134637','16958309','18830809','17526719','16136144','18937570','17792643','16398181','17949380','18274392','19096885','18291047','18798194','16391858','18138397','18454399','15475354','16629688','15368643','19034670','16229767','16229508','18232056','18569919','18953939','19011255','18992875','15981984','15981836','18426750','18576198','17032171','18884919','18303577','18740394','16265083','16575835','17276682','17261249','17229629','15506713','19075252','18496633','18286548','18895169','15536150','19152793','15944294','19048856','16369461','16077416','15699071','19154893','17688012','16015029','16069027','18404583','18967155','15801970','15842243','15348689','17025975','18279222','18015119','15959692','16224376','15262802'];
//	for(var i=0;i<rts.length;i++){
//		if( $.inArray (rts[i], cts) != -1){
//			//console.log('ok');
//		}else{
//			console.log(rts[i]);
//		}
//	}
//}